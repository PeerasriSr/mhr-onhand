<div class="container-fluid">
  <div class="card p-2 mt-2">
    <div class="row">
      <div class="col">
        <p class="h5">
          <i class="fa-solid fa-store"></i> คลังย่อย / อาคารผู้ป่วยนอก
        </p>
      </div>
      <div class="col">
        <!-- <select
          class="form-select"
          aria-label="Default select example"
          #cricket
          (change)="selectDep($event)"
        >
          <option *ngFor="let x of listDepID" [value]="x.depCode">
            {{ x.depName }}
          </option>
        </select> -->
      </div>
      <div class="col right">
        <mat-form-field>
          <input matInput (keyup)="drugFilter($event)" #input />
          <mat-placeholder>ค้นหา : รหัสยา / ชื่อยา</mat-placeholder>
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
      </div>
    </div>
    <div class="grid-container">
      <div class="grid-item" style="border-right: 0.1px solid lightgray">
        <div>
          <section class="table-container" tabindex="0">
            <table
              mat-table
              [dataSource]="dataSubStock"
              #sortINV="matSort"
              matSort
              class="table table-striped"
              matSortActive=""
              matSortDirection=""
            >
              <ng-container matColumnDef="indexrow">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let element">
                  {{ element.indexrow }}
                </td>
              </ng-container>

              <ng-container matColumnDef="invCode">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  รหัส INV
                </th>
                <td mat-cell *matCellDef="let element" class="">
                  {{ element.invCode }}
                </td>
              </ng-container>
              <ng-container matColumnDef="drugCode">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  รหัสยา
                </th>
                <td mat-cell *matCellDef="let element" class="">
                  {{ element.drugCode }}
                </td>
              </ng-container>

              <ng-container matColumnDef="drugName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  ชื่อยา
                </th>
                <td mat-cell *matCellDef="let element" class="">
                  {{ element.drugName }}
                </td>
              </ng-container>

              <ng-container matColumnDef="amount">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  จำนวนคงเหลือ
                </th>
                <td mat-cell *matCellDef="let element" class="right num">
                  {{ element.amount }}
                </td>
              </ng-container>
              <tr
                mat-header-row
                *matHeaderRowDef="displayedINV; sticky: true"
              ></tr>
              <tr
                mat-row
                *matRowDef="let row; columns: displayedINV; let i = index"
                style="cursor: pointer"
                (click)="selectDrug(row)"
                [ngClass]="{
                  highlightTableColor: selectedRowIndex == row.indexrow
                }"
              ></tr>
            </table>
          </section>
        </div>
        <div>
          <mat-paginator
            #paginatorINV="matPaginator"
            style="display: flex; justify-content: center"
            [length]="10"
            [pageSize]="10"
            [pageSizeOptions]="[10, 25, 50]"
            showFirstLastButtons
          >
          </mat-paginator>
        </div>
      </div>
      <div class="grid-item">
        <div>
          <section class="table-container" tabindex="0">
            <table
              mat-table
              [dataSource]="dataLot"
              #sortLot="matSort"
              matSort
              class="table table-striped"
              matSortActive="EXPIRED_DATE"
              matSortDirection="asc"
            >
              <ng-container matColumnDef="LOT_NO">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  เลข Lot
                </th>
                <td
                  mat-cell
                  *matCellDef="let element"
                  class="highlightTableColor"
                >
                  {{ element.LOT_NO }}
                </td>
              </ng-container>
              <ng-container matColumnDef="EXPIRED_DATE">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  วันหมดอายุ
                </th>
                <td
                  mat-cell
                  *matCellDef="let element"
                  class="center highlightTableColor"
                >
                  {{ element.EXPIRED_DATE }}
                </td>
              </ng-container>
              <ng-container matColumnDef="QTY_ON_HAND">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  จำนวนคงเหลือ
                </th>
                <td
                  mat-cell
                  *matCellDef="let element"
                  class="right num highlightTableColor"
                >
                  {{ element.QTY_ON_HAND }}
                </td>
              </ng-container>
              <tr
                mat-header-row
                *matHeaderRowDef="displayedLot; sticky: true"
              ></tr>
              <tr mat-row *matRowDef="let row; columns: displayedLot"></tr>
            </table>
          </section>
        </div>
        <div>
          <mat-paginator
            #paginatorLot="matPaginator"
            style="display: flex; justify-content: center"
            [length]="10"
            [pageSize]="10"
            [pageSizeOptions]="[10, 25, 50]"
            showFirstLastButtons
          >
          </mat-paginator>
        </div>
      </div>
    </div>
  </div>
</div>
